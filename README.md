# React Workshop for GETS AS

## Before we begin

Before starting the workshop you should make sure you have the required dependencies installed

  - NPM
  - Node.js
  - Code editor of your choice (VSCode is great)

If you're running Visual Studio Code 1.33.0 or 1.33.1 there is a performance bug with Intellisense.
To temporarily fix this we can disable the built-in extension "TypeScript and JavaScript Language Features".
Go to Extensions, and search for '@builtin typescript' to find it.

Once you have installed all required dependencies we can set-up our project with:

`npx create-react-app mcu-avengers-equipment`

We do this for convenience for the workshop - create-react-app will run a script that sets up a simple Hello World-type
application.

Navigate to the root folder of the project, and run the following commands to install our remaining dependencies:

`npx -p @storybook/cli sb init --type react` - This will install storybook in the project allowing us to test individual UI-components
`npm install --save styled-components@latest react@latest react-dom@latest` - This will install styled-components which we will use for our CSS
and also update to the latest version of react and react-dom.
`npm install --save-dev prop-types@latest` - We will be using prop-types to strong type our components
`npm run build` - To make our initial build of the solution
`npm install` - To make sure all of our dependencies from our package.json is installed

### Delete autogenerated code we dont need

In the `src` folder, delete `App.css`, `Index.css` and `logo.svg`.
In `App.js` and `Index.js` remove all references to the files we just deleted.
In `App.js` remove all code that isn't prefixed by either an `import` or `export` statement.

### Configuring the storybook

Navigate to `storybook/config.js` from the root folder of the project.

```
import { configure } from '@storybook/react';

const loadstories = () => {
  const req = require.context('../stories', true, /\.stories\.js$/);
  req.keys().forEach(filename => req(filename));
}

configure(loadStories, module);
```

This configuration setting will make the storybook load in any files with the suffix `[somefile].stories.js` from anywhere in our project as a story module.

### Adding some mockdata

Create a new file `/src/mockdata.js` containing the following code.
This will populate an array with 100 random products that we will be using in our app.

```
const generateNumber = length => {
  const seed = Math.random();
  const max = Math.pow(10, length);
  return Math.floor(seed * max).toString().padStart(length, 0);
};

const colors = ['white', 'blue', 'red', 'green', 'blue', 'rainbow', 'cyan', 'pink', 'chair', 'angry'].map(e => `${generateNumber(1).padStart(3, 0)} ${e}`);

const product = ['Vikafjell', 'Sway', 'Sweet', 'Nike', 'NorrÃ¸na', 'Devold', 'Ecco', 'Hydra', 'Thanos', 'Jon Snow'];

const supplier = [
  'Element Productions AS',
  'Devold of Norway AS',
  'Missing Link Group',
  'Suno Sport Norge',
  'Nick Fury AS',
  'Steve Rogers Inc',
  'Tony Stark CC',
  'Affiliated Avengers',
  'Beep-Boop-Beep',
  'Bran 2000 Raven Simulator',
];

const createNewJson = () => {
  return {
    "ArticleID": generateNumber(5),
    "ArticleNo": `${generateNumber(5)}-EL${generateNumber(5)}`,
    "Name": "Varm ullgenser",
    "SupplierName": supplier[Math.floor(Math.random() * 10)],
    "ProductLineName": product[Math.floor(Math.random() * 10)],
    "MainGroupName": "Tekstil",
    "ArticleGroup2Name": "MellomLag",
    "ArticleGroup3Name": "Ullgenser",
    "PurchasePrice": generateNumber(3),
    "SalesPrice": generateNumber(3),
    "SuggestedPrice": generateNumber(4),
    "Variants": [
        {
            "EAN": generateNumber(13),
            "Color": `${colors[Math.floor(Math.random() * 10)]}`,
            "Size": "S"
        },
        {
            "EAN": generateNumber(13),
            "Color": `${colors[Math.floor(Math.random() * 10)]}`,
            "Size": "M"
        },
        {
            "EAN": generateNumber(13),
            "Color": `${colors[Math.floor(Math.random() * 10)]}`,
            "Size": "L"
        }
    ],
  }
};

export default Array(100).fill({}).map(each => createNewJson()); 
```

## Lets get started coding!

Lets start coding!  The goal for this workshop is to create a table that displays our mockdata, we will also use the object keys for table headings.
Then we will make a button to delete products from the table, a feature to sort each column alphabetically and an input field that we can use to filter data base on our typed input.

### Starting small

Our first task is to create a simple table row from a data input of variable length.  For this task we need to use two of our installed NPM-modules: `React` and `styled-components`.
In the ES6 syntax that React uses - we can use the new, improved import statements.

```
import React from 'react';
import styled from 'styled-components';
```

Notice how React uses an uppercase syntax for Components, and lowercase for functions and variables.
When using styled-components it is important to remember that while the function `styled()` generates a className,
we have to manually pass this down to the DOM-node unless we are creating a pure styled component such as `styled.tr`,
as opposed to a `styled(Row)` - the className will be available as a prop on the component that is styled.

Lets also make the reasonable assumption that we recieve a 'values' array as a prop, and map these values to each individual
table cell. 

```
import React from 'react';
import styled from 'styled-components';
import PropTypes from 'prop-types;

const Row = ({ className, values }) => (
  <tr className={className}>
    {values.map((value, index) => <td key={index}>{value}</td>)}
  </tr>
);

Row.propTypes = {
  className: PropTypes.string.isRequired;
  values: PropTypes.array.isRequired;
};

export default styled(Row)`
  width: 100%;
`;
```